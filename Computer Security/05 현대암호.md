05 현대암호
===

# 1. 암호방식

## 1.1 대칭키 암호

대칭키 암호는 암호화(encryption)와 복호화(decryption)에 같은 암호 키를 사용하는 것을 의미한다. 대칭키 암호에서는 암호화 하는 측과 복호화 하는 측이 같은 암호 키를 공유해야 한다. 대칭키 암호는 혼돈과 확산의 성질을 이용하여 평문을 암호화 한다. 

혼돈(confusion)효과는 치환(substitution)을 통해 형성되고, 확산(diffusion)효과는 순열(permutation)을 통해 얻는다. 대칭키 암호를 설계 할 떄는 이 치환과 순열 연산을 포함하여 한개의 라운드(round)를 구성한다.

대칭키 암호에서 라운드를 어떻게 구성할지 결정하였다면, 이 라운드를 반복적으로 사용하는 구조로 대칭키 암호를 완성한다. 대칭키 암호 방식은 데이터를 변환하는 방법에 따라서 스트림 암호와 블록 암호로 나뉜다.

대칭키의 암호화 성능은 키의 길이에 의존하는데 일반적인 키의 크기는 40 ~ 448bits이다. 슈퍼컴퓨터를 이용한다면 56bits의 키는 24시간 내에 해독이 가능하나, 128bits키는 2^72배 오래 걸린다. 이는 우주의 역사보다 긴 시간이다.

- 장점

    - 키 크기가 상대적으로 작고 암호 알고리즘 내부 구조가 단순하다.
    - 시스템 개발 환경에 용이하고, 비대칭 키에 비해 암호화와 복호화 속도가 빠르다.

- 단점

    - 당사자간에 동일한 키를 공유해야 하므로 키 관리의 어려움이 있다.
    - 잦은 키 변경이 있는 경우 불편함을 초래한다.
    - 디지털 서명 기법의 적용과 안전성을 분석하기가 어려우며 중재가 필요하다.

### 스트림 암호

스트림 암호는 데이터 흐름인 스트림(stream)을 비트 단위로 순차적으로 처리해가는 암호 알고리즘으로서, one time pad를 실용적으로 구현할 목적을 개발되었다.

### 블록 암호

블록 암호는 암호문을 만들기 위하여 암호 키와 알고리즘이 데이터 블록 단위로 적용되는 암호화 방법이다. 평문의 동일 블록들이 하나의 메시지에서 동일한 암호문으로 되지 않도록 하기 위해 이전 암호 블록의 암호문을 다음 블록에 순서대로 적용하는 것이다.

라운드 함수를 사용해 반복적으로 암호화 가정을 행함으로써 암호화 강도를 향상시킨다. 블록암호는 전치와 대체를 이용한다. 이러한 블록암호 구조에서 Feistel구조와 SPN(Substitution-Permutation Network)구조가 있다.

- 장점

    - 소프트웨어적으로 구현할 수 있다.
    - 전치와 치환을 반복하여 평문과 암호문으로부터 키에 대한 정보를 찾아내기 어렵다.
    - 데이터 전송, 대용량 데이터 저장시 사용한다.

- 단점

    - 느린 암호화 속도와 에러 전파의 문제가 있다.
    - 데이터의 크기가 작을 경우 효율적으로 암호화하기에는 적합하지 않다.

### Feistel 구조

DES를 포함한 기존의 거의 모든 블록 암호 알고리즘은 1973년 IBM의 Horst Feistel이 처음 고안한 구조를 따르고 있다. Feistel 구조는 아래의 매개변수 및 설계 기능에 따라 결정된다.

- Block Size 
- Key Size
- Number of rounds
- Subkey Generation Algorithm
- Fast software encryption/decryption

아래의 그림은 Feistel 구조이며, 암호화하려는 정보를 길이가 같은 두개의 정보로 나눈다. 이를 $L_0, \; R_0$라 하고, 라운드 0 ~ n에서 사용되는 키를 $K_i$ 그리고 라운드 함수를 $F()$로 놓는다.

암호화 과정에서는 각 라운드에서 다음과 같은 연산이 이루어진다.

- $L_(i+1) = R_i$
- $R_(i+1) = Li \bigoplus F(R_i,K_i)$

모든 라운드가 끝난후 최종적으로 $R_(n+1), \; L_(n+1)$이 암호화된 값이 된다.

복호화 과정에서는 반대의 연산이 이루어진다. $R_(n+1), \; L_(n+1)$이 주어졌을 때, 각 복호화 라운드에서는 다음과 같은 연산이 이루어진다.

- $R_i = L_(i+1)$
- $L_i = R_(i+1) \bigoplus F(L_(i+1),K_i)

최종적으로 원래 값 $L_0, \; R_0$를 얻는다. 

이 모델의 장점 중 하나는 암호화 과정과 복호화 과정이 키 순서를 제외한 전체가 같은 계산을 반복한다는 것이다. 또한 라운드 함수에 역연산이 있을 필요가 없다.

DES, 블로피시, SEED등은 Feistel 구조를 가진 알고리즘이다. 

### DES

가장 널리 알려진 대칭키 암호화 알고리즘으로 최초로 미국 표준으로 선정되어 은행 거래시 보안 알고리즘으로 자주 사용되고 있다.

64bis 블록 암호를 사용하며 이중 8bits는 parity check에 사용된다. 키는 54bits를 사용한다.

평문이나 키에 약간의 변화만 생겨도 암호문에 매우 큰 변화를 가져오는 avalanche 효과가 강하다. 최근에는 DES암호화를 세 개의 키로 세 번 반복하여 암호의 강도를 높인 Triple-DES가 사용되고 있다.




#### SPN 구조

## 1.2 공개키 암호

### 결정론적 암호

### 확률론적 암호
