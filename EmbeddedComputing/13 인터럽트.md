13 인터럽트
===

# 1. 인터럽트

- 인터럽트의 종류는 미리 정의되어 있음 : 26개
- 인터럽트의 우선 순위도 미리 정의되어 있음 : 낮은 번호의 인터럽트가 우선 순위가 높음
- 인터럽트 벡터 : 해당 인터럽트 발생 시 이동할 인터럽트 서비스 루틴(ISR)의 주소
- 인터럽트 벡터 테이블 : 인터럽트 벡터를 모아놓은 테이블로 프로그램의 시작 부분에 존재

<img width="75%" src="img/인터럽트%20%20테이블.png">

벡터이름은 인터럽트를 호출할때 사용할 이름입니다. 

이번시간에서는 1~6까지의 인터럽트를 다루겠습니다.

- RESET
- INT0 : 
- INT1 : 
- PCINT0
- PCINT1
- PCINT2

## 1.1 인터럽트 처리

1. 인터럽트 발생
    
    예) 벡터번호 4번, 핀 변화 인터럽트 0번 (PCINT0) 발생

2. 인터럽트 벡터 테이블의 해당 프로그램 주소로 이동

    예) 핀 변화 인터럽트 0번에 해당하는 프로그램 주소는 0x0006

3. 프로그램 주소에 기록된 ISR 주소 찾기

    예) 0x0006 번지에 사용자가 작성한 ISR의 주소가 기록되어 있음

4. 해당 ISR로 이동 및 처리

    예) ISR로 이동하여 인터럽트 처리

5. 인터럽트 처리 후 인터럽트 발생 이전으로 되돌아가 실행 계속

## 1.2 ISR 호출 조건

다음 3가지 조건을 충족하면 ISR이 호출되고 인터럽트가 처리됨

- **전역적 인터럽트 활성화 비트가 세트**
- **인터럽트별로 개별 인터럽트 활성화 비트 세트**
- **인터럽트에 해당하는 이벤트 발생**

전역 인터럽트 활성화 비트

- SREG 레지스터(status register, 상태 레지스터)의 7번 ‘I’ 비트에 해당
- 전역 인터럽트 활성화 함수 : sei (Set Interrupt)
- 전역 인터럽트 비활성화 함수 : cli (Clear Interrupt)

